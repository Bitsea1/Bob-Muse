(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2e9fd640"],{"0c79":function(t,e,a){},"1a2e":function(t,e,a){"use strict";a("0c79")},f4d1:function(t,e,a){"use strict";a.r(e);a("149f");var i=a("4ec3"),r=(a("1f57"),{components:{},props:{user:{type:Object}},data(){return{data:{},loading:!0,pay_loading:!1,period:"month_price",period_text:this.$t("plan.period.month_price"),periodList:{month_price:this.$t("plan.period.month_price"),quarter_price:this.$t("plan.period.quarter_price"),half_year_price:this.$t("plan.period.half_year_price"),year_price:this.$t("plan.period.year_price"),two_year_price:this.$t("plan.period.two_year_price"),three_year_price:this.$t("plan.period.three_year_price"),onetime_price:this.$t("plan.period.onetime_price"),reset_price:this.$t("plan.period.reset_price")},discount_price:0,price:0,total:0,plan_id:0,coupon_code:"",coupon_code_data:{},payment_method:[],payment:"",order:{},showQrCode:!1,config:{},isPc:this.isPc()}},mounted(){this.config=JSON.parse(localStorage.getItem("config_data")),window.clearInterval(),this.plan_id=this.$route.params.id,this.getData(this.plan_id)},methods:{getData(t){Object(i.s)({id:t}).then(t=>{this.loading=!1,this.data=t.data,this.$route.params.period&&t.data[this.$route.params.period]>0?(this.period=this.$route.params.period,this.period_text=this.periodList[this.period],this.total=t.data[this.period],this.price=t.data[this.period]):t.data.month_price?(this.price=t.data.month_price,this.total=t.data.month_price,this.period_text=this.$t("plan.period.month_price"),this.period="month_price"):t.data.quarter_price?(this.price=t.data.quarter_price,this.total=t.data.quarter_price,this.period_text=this.$t("plan.period.quarter_price"),this.period="quarter_price"):t.data.half_year_price?(this.price=t.data.half_year_price,this.total=t.data.half_year_price,this.period_text=this.$t("plan.period.half_year_price"),this.period="half_year_price"):t.data.year_price?(this.price=t.data.year_price,this.total=t.data.year_price,this.period_text=this.$t("plan.period.year_price"),this.period="year_price"):t.data.two_year_price?(this.price=t.data.two_year_price,this.total=t.data.two_year_price,this.period_text=this.$t("plan.period.two_year_price"),this.period="three_year_price"):t.data.two_year_price?(this.price=t.data.three_year_price,this.total=t.data.three_year_price,this.period_text=this.$t("plan.period.three_year_price"),this.period="three_year_price"):t.data.onetime_price?(this.price=t.data.onetime_price,this.total=t.data.onetime_price,this.period_text=this.$t("plan.period.onetime_price"),this.period="onetime_price"):t.data.reset_price&&(this.price=t.data.reset_price,this.total=t.data.reset_price,this.period_text=this.$t("plan.period.reset_price"),this.period="reset_price"),this.data.is_json=!1,this.isJSON(this.data.content)&&(this.data.content=JSON.parse(this.data.content),this.data.is_json=!0),this.user.balance<this.total?this.total=this.total-this.user.balance:this.total=0,this.$emit("changeSpin",!1)}),Object(i.q)().then(t=>{this.payment_method=t.data,t.data&&(this.payment=t.data[0].id)})},onCheck(t){let e=this;Object(i.c)({code:t,plan_id:e.plan_id}).then(t=>{e.coupon_code=t.data.code,e.coupon_code_data=t.data,e.calcuCoupon()})},calcuCoupon(){let t=this;if(1===t.coupon_code_data.type)t.total=(t.price-t.coupon_code_data.value).toFixed(2),t.discount_price=res.data.value;else{let e=parseFloat((100-t.coupon_code_data.value)/100);t.total=(t.price*e).toFixed(2),t.discount_price=(t.price*(1-e)).toFixed(2)}t.total=t.total-t.user.balance},pay(){this.pay_loading=!0;let t={period:this.period,plan_id:this.plan_id};this.coupon_code&&(t.coupon_code=this.coupon_code),Object(i.E)(t).then(t=>{this.pay_loading=!1,t.data&&this.$router.push({name:"checkout",params:{id:t.data}})}).catch(()=>{this.pay_loading=!1})},checkOrderInterval(t){let e=this;const a=window.setInterval(function(){Object(i.e)({trade_no:t}).then(t=>{t.data&&(e.showQrCode=!1,e.showResult=t.data,clearInterval(a),e.countDown())})},3e3,t)},countDown(){window.clearInterval();let t=5;const e=this.$success({title:"支付成功",content:`前往获取订阅链接(${t}) .`,onOk(){this.$router.push({path:"/subscribe"})}}),a=setInterval(()=>{t-=1,e.update({content:`前往获取订阅链接(${t}) .`})},1e3);setTimeout(()=>{clearInterval(a),e.destroy(),this.$router.push({path:"/subscribe"})},5e3)},changeperiod(t){this.period=t,this.period_text=this.periodList[t],this.total=this.data[t],this.user.balance>0&&(this.total=this.total-this.user.balance),this.price=this.data[t],this.coupon_code&&this.calcuCoupon()},isJSON(t){if("string"==typeof t)try{return JSON.parse(t),!0}catch(t){return!1}}},filters:{formatDate:function(t){if(!t)return!1;10===t.toString().length&&(t*=1e3);let e=new Date(t),a=e.getFullYear(),i=e.getMonth()+1;i=i<10?"0"+i:i;let r=e.getDate();return a+"-"+i+"-"+(r=r<10?"0"+r:r)},money:t=>(t/100).toFixed(2)}}),s=(a("1a2e"),a("e607")),o=Object(s.a)(r,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-row",{attrs:{type:"flex",gutter:24}},[a("a-col",{attrs:{span:24,md:16}},[a("a-row",{attrs:{type:"flex",gutter:24}},[a("a-col",{staticClass:"mb-24",attrs:{span:24}},[a("a-card",{staticClass:"header-solid",attrs:{bordered:!1,bodyStyle:{paddingTop:0,paddingBottom:"16px"}},scopedSlots:t._u([{key:"title",fn:function(){return[a("h4",{staticClass:"font-semibold m-0"},[t._v(t._s(t.data.name))])]},proxy:!0}])},[a("a-row",{attrs:{gutter:[24,24]}},[t.data.is_json?a("div",{staticStyle:{padding:"10px"}},t._l(t.data.content,function(e,i){return a("div",{staticStyle:{"text-align":"left","margin-bottom":"10px"},style:e.support?"opacity: 1;":"opacity: 0.3;"},[e.support?a("a-icon",{staticStyle:{"font-size":"21px","vertical-align":"sub"},attrs:{type:"check-circle",theme:"twoTone"}}):a("a-icon",{staticStyle:{"font-size":"21px","vertical-align":"sub"},attrs:{type:"close-circle",theme:"twoTone"}}),a("span",{staticStyle:{"padding-left":"8px","font-size":"18px"}},[t._v(t._s(e.feature))])],1)}),0):a("ul",{staticClass:"list-pricing",domProps:{innerHTML:t._s(t.data.content)}})])],1)],1),a("a-col",{attrs:{span:24,md:24}},[a("a-row",{attrs:{type:"flex",gutter:24}},[a("a-col",{staticClass:"mb-24",attrs:{span:24}},[a("a-card",{staticClass:"header-solid h-full",attrs:{bordered:!1,bodyStyle:{paddingTop:0}},scopedSlots:t._u([{key:"title",fn:function(){return[a("a-row",{attrs:{type:"flex",align:"middle"}},[a("a-col",{attrs:{span:24,md:12}},[a("h6",{staticClass:"font-semibold m-0"},[t._v(t._s(t.$t("plan.text_2")))])])],1)]},proxy:!0}])},[a("a-row",{attrs:{gutter:[24,24]}},[t.data.month_price?a("a-col",{attrs:{span:24,md:4}},[a("a-button",{class:"month_price"===t.period?"period-checked":"",staticStyle:{width:"100%","font-size":"14px"},on:{click:function(e){return t.changeperiod("month_price")}}},[t._v(" "+t._s(t.$t("plan.period.month_price"))+" ")])],1):t._e(),t.data.quarter_price?a("a-col",{attrs:{span:24,md:4}},[a("a-button",{class:"quarter_price"===t.period?"period-checked":"",staticStyle:{width:"100%","font-size":"14px"},on:{click:function(e){return t.changeperiod("quarter_price")}}},[t._v(" "+t._s(t.$t("plan.period.quarter_price"))+" ")])],1):t._e(),t.data.half_year_price?a("a-col",{attrs:{span:24,md:4}},[a("a-button",{class:"half_year_price"===t.period?"period-checked":"",staticStyle:{width:"100%","font-size":"14px"},on:{click:function(e){return t.changeperiod("half_year_price")}}},[t._v(" "+t._s(t.$t("plan.period.half_year_price"))+" ")])],1):t._e(),t.data.year_price?a("a-col",{attrs:{span:24,md:4}},[a("a-button",{class:"year_price"===t.period?"period-checked":"",staticStyle:{width:"100%","font-size":"14px"},on:{click:function(e){return t.changeperiod("year_price")}}},[t._v(" "+t._s(t.$t("plan.period.year_price"))+" ")])],1):t._e(),t.data.two_year_price?a("a-col",{attrs:{span:24,md:4}},[a("a-button",{class:"two_year_price"===t.period?"period-checked":"",staticStyle:{width:"100%","font-size":"14px"},on:{click:function(e){return t.changeperiod("two_year_price")}}},[t._v(" "+t._s(t.$t("plan.period.two_year_price"))+" ")])],1):t._e(),t.data.three_year_price?a("a-col",{attrs:{span:24,md:4}},[a("a-button",{class:"three_year_price"===t.period?"period-checked":"",staticStyle:{width:"100%","font-size":"14px"},on:{click:function(e){return t.changeperiod("three_year_price")}}},[t._v(" "+t._s(t.$t("plan.period.three_year_price"))+" ")])],1):t._e(),t.data.onetime_price?a("a-col",{attrs:{span:24,md:4}},[a("a-button",{class:"onetime_price"===t.period?"period-checked":"",staticStyle:{width:"100%","font-size":"14px"},on:{click:function(e){return t.changeperiod("onetime_price")}}},[t._v(" "+t._s(t.$t("plan.period.onetime_price"))+" ")])],1):t._e(),t.data.reset_price?a("a-col",{attrs:{span:24,md:4}},[a("a-button",{class:"reset_price"===t.period?"period-checked":"",staticStyle:{width:"100%","font-size":"14px"},on:{click:function(e){return t.changeperiod("reset_price")}}},[t._v(" "+t._s(t.$t("plan.period.reset_price"))+" ")])],1):t._e()],1)],1)],1)],1)],1)],1)],1),a("a-col",{staticClass:"mb-24",attrs:{span:24,md:8}},[a("a-card",{staticClass:"header-solid h-full",attrs:{bordered:!1,bodyStyle:{paddingTop:0,paddingBottom:"16px"}},scopedSlots:t._u([{key:"title",fn:function(){return[a("h6",{staticClass:"font-semibold m-0"},[t._v(t._s(t.$t("plan.text_3")))])]},proxy:!0}])},[t.order.id?a("template",{staticClass:"mb-0",slot:"extra"},[a("a-button",{attrs:{type:"danger"}},[t._v(" "+t._s(t.$t("plan.text_4"))+" ")])],1):t._e(),a("div",{staticClass:"transactions-list ant-list"},[a("div",{staticClass:"ant-spin-nested-loading"},[a("div",{staticClass:"ant-spin-container"},[a("ul",{staticClass:"ant-list-items"},[a("li",[a("h6",[a("a-icon",{staticClass:"mr-5",attrs:{type:"credit-card"}}),t._v(t._s(t.$t("plan.text_5")))],1)]),a("li",{staticClass:"ant-list-item"},[a("div",{staticClass:"ant-list-item-meta"},[a("div",{staticClass:"ant-list-item-meta-avatar"}),a("div",{staticClass:"ant-list-item-meta-content"},[a("h6",{staticClass:"ant-list-item-meta-title",staticStyle:{"font-size":"16px"}},[t._v(t._s(t.data.name)+" x "+t._s(t.period_text))])])]),a("div",{staticClass:"amount"},[a("span",[t._v(t._s(t.config.currency_symbol)+t._s(t._f("money")(t.data[t.period])))])])]),a("li",[a("h6",[a("a-icon",{staticClass:"mr-5",attrs:{type:"bg-colors"}}),t._v(t._s(t.$t("plan.text_9")))],1)]),a("li",{staticClass:"ant-list-item"},[a("div",{staticClass:"amount"},[a("span",[t._v(t._s(t.data.transfer_enable)+" GB")])])]),a("li",[a("h6",[a("a-icon",{staticClass:"mr-5",attrs:{type:"pay-circle"}}),t._v(t._s(t.$t("plan.text_6")))],1)]),0!=t.discount_price?a("li",{staticClass:"ant-list-item"},[a("div",{staticClass:"amount"},[a("span",[t._v(t._s(t.config.currency_symbol)+t._s(t._f("money")(t.discount_price)))])])]):a("li",{staticClass:"ant-list-item"},[a("a-input-search",{attrs:{placeholder:t.$t("plan.text_8"),"enter-button":"验证",allowClear:!0},on:{search:t.onCheck}})],1),a("li",[a("h6",[a("a-icon",{staticClass:"mr-5",attrs:{type:"pay-circle"}}),t._v(t._s(t.$t("plan.text_7")))],1)]),a("li",{staticClass:"ant-list-item"},[a("div",{staticClass:"amount"},[t.user.balance>=t.total?a("span",[t._v(t._s(t.config.currency_symbol)+t._s(t._f("money")(t.price)))]):a("span",[t._v(t._s(t.config.currency_symbol)+t._s(t._f("money")(t.user.balance)))])])])])])])]),a("a-divider"),a("a-row",{staticClass:"mb-24",attrs:{type:"flex",align:"middle"}},[a("a-col",[a("h6",{staticClass:"font-regular mb-0"},[t._v(t._s(t.$t("plan.text_10")))])]),a("a-col",{staticClass:"ml-auto"},[a("span",{staticClass:"mr-15",staticStyle:{"font-size":"24px","font-weight":"bold"}},[t._v(t._s(t.config.currency_symbol)+t._s(t._f("money")(t.total)))])])],1),a("a-row",{staticClass:"mt-10",attrs:{gutter:[24]}},[a("a-col",{attrs:{span:12}}),a("a-col",{staticClass:"text-right",attrs:{span:12}},[a("a-button",{attrs:{type:"primary",block:"",loading:t.pay_loading},on:{click:function(e){return t.pay()}}},[a("a-icon",{staticClass:"mr-5",attrs:{type:"account-book"}}),t._v(" "+t._s(t.$t("plan.button_1"))+" ")],1)],1)],1)],2)],1)],1),a("a-button",{staticClass:"pay-button",attrs:{type:"primary",block:""},on:{click:function(e){return t.pay()}}},[a("a-icon",{staticClass:"mr-5",attrs:{type:"account-book"}}),t._v(" "+t._s(t.$t("plan.button_1"))+" ")],1),a("a-modal",{attrs:{title:t.$t("plan.text_11"),footer:null},model:{value:t.showQrCode,callback:function(e){t.showQrCode=e},expression:"showQrCode"}},[a("div",{ref:"qrCodeDiv",staticClass:"qrCode",attrs:{id:"qrCode"}})])],1)},[],!1,null,"1778d0c2",null);e.default=o.exports}}]);