(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2bfc8798"],{2910:function(t,e,a){"use strict";var s={props:["sitekey"],methods:{loaded(){window.grecaptcha.render(this.$refs.grecaptcha,{sitekey:this.sitekey,callback:t=>{this.$emit("getValidateCode",t)}})}},mounted(){window.ReCaptchaLoaded=this.loaded;var t=document.createElement("script");t.src="https://recaptcha.net/recaptcha/api.js?onload=ReCaptchaLoaded&render=explicit",document.head.appendChild(t)}},i=a("e607"),r=Object(i.a)(s,function(){var t=this.$createElement;return(this._self._c||t)("div",{ref:"grecaptcha"})},[],!1,null,null,null);e.a=r.exports},e08b:function(t,e,a){"use strict";a.r(e);a("149f");var s=a("3786"),i={components:{reCaptcha:a("2910").a},data(){return{form:{invite_code:"",email_code:"",email:"",checkPass:"",auth_password:"",recaptcha_data:""},config:{},invite_text:"",email_suffix:"",recaptcha_data:"",key:"",show:!0,visible:!1,count:60,rules:{email:[{required:!0,message:this.$t("error.email_null"),trigger:"change"}],password:[{required:!0,message:this.$t("error.password_null"),trigger:"change"}],auth_password:[{required:!0,message:this.$t("error.password_null"),trigger:"change"}],email_code:[{required:!0,message:this.$t("error.email_code_null"),trigger:"change"}]}}},mounted(){(this.$route.query.code||sessionStorage.getItem("code"))&&(this.form.invite_code=this.$route.query.code?this.$route.query.code:sessionStorage.getItem("code")),this.getConfig(),this.$on("getValidateCode",function(t){this.form.recaptcha_data=t})},methods:{getConfig(){Object(s.b)().then(t=>{this.config=t.data,t.data.email_whitelist_suffix&&(this.email_suffix=t.data.email_whitelist_suffix[0]),t.data.is_invite_force?this.invite_text="邀请码(必填)":this.invite_text="邀请码(选填)"})},sendMail(t){if(!this.form.email)return this.$message.warning(this.$t("error.email_null")),!1;let e=this.form.email;if(this.email_suffix&&(e=this.form.email+"@"+this.email_suffix),1===this.config.is_recaptcha&&t)return this.visible=!0,!1;let a={email:e};this.recaptcha_data&&(a.recaptcha_data=this.recaptcha_data),Object(s.e)(a).then(t=>{t.data&&(this.$message.success("发送成功"),this.count=60,this.show=!1,this.timer=setInterval(()=>{this.count>0&&this.count<=60?this.count--:(this.show=!0,clearInterval(this.timer),this.timer=null)},1e3))})},handleSubmit(t){if(!this.form.email)return this.$message.warning("请先输入邮箱"),!1;if(!this.form.password)return this.$message.warning("请输入密码"),!1;if(this.form.auth_password!==this.form.password)return this.$message.warning("两次密码输入不一致"),!1;if(this.config.is_invite_force&&!this.form.invite_code)return this.$message.warning("请输入邀请码"),!1;if(this.config.is_email_verify&&!this.form.email_code)return this.$message.warning("请输入邮箱验证码"),!1;let e=this.form;this.email_suffix&&(e.email=this.form.email+"@"+this.email_suffix),this.$refs.ruleForm.validate(t=>{if(!t)return!1;Object(s.d)(e).then(t=>{t.data&&(this.$message.success("注册成功"),this.$store.commit("setToken",t.data.auth_data),setTimeout(()=>{this.$router.push({path:"/dashboard"})},1e3))})})},getValidateCode(t){this.form.recaptcha_data=t},getValidateCode2(t){this.recaptcha_data=t,this.recaptcha_data&&(this.visible=!1,this.sendMail(!1))}}},r=a("e607"),o=Object(r.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sign-in"},[a("a-row",{staticClass:"row-main",attrs:{type:"flex",gutter:[24,24],justify:"space-around",align:"middle"}},[a("a-col",{staticClass:"col-img",attrs:{span:24,md:12,lg:12,xl:12}},[a("div",{staticClass:"col-left"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:"/theme/Muse/images/info-rocket-ill.png",alt:"rocket"}})]),a("h4",{staticClass:"text-white"},[t._v(t._s(t.$t("login.text_7")))]),a("p",{staticClass:"text-white"},[t._v(t._s(t.$t("login.text_8")))])])]),a("a-col",{staticClass:"col-form ml-auto",attrs:{span:24,md:{span:14,offset:2},lg:10,xl:6}},[a("h4",{staticClass:"mb-15"},[t._v(t._s(t.$t("register.text_1")))]),a("p",{staticClass:"text-muted"},[t._v(t._s(t.$t("register.text_2")))]),a("a-form-model",{ref:"ruleForm",staticClass:"register-form",attrs:{model:t.form,rules:t.rules}},[t.config.email_whitelist_suffix?a("a-form-model-item",{staticClass:"mb-10",attrs:{label:t.$t("email"),prop:"email"}},[a("a-input",{attrs:{placeholder:t.$t("email")},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}},[a("a-select",{staticStyle:{width:"150px"},attrs:{slot:"addonAfter","default-value":t.config.email_whitelist_suffix[0]},slot:"addonAfter",model:{value:t.email_suffix,callback:function(e){t.email_suffix=e},expression:"email_suffix"}},t._l(t.config.email_whitelist_suffix,function(e,s){return a("a-select-option",{key:s,attrs:{value:e}},[t._v(" @"+t._s(e)+" ")])}),1)],1)],1):a("a-form-model-item",{staticClass:"mb-10",attrs:{label:t.$t("email"),prop:"email"}},[a("a-input",{attrs:{placeholder:t.$t("email")},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t.config.is_email_verify?a("a-form-model-item",{staticClass:"mb-10",attrs:{label:t.$t("register.text_7"),prop:"email_code"}},[a("a-input",{attrs:{placeholder:t.$t("register.text_7")},model:{value:t.form.email_code,callback:function(e){t.$set(t.form,"email_code",e)},expression:"form.email_code"}},[t.show?a("a-button",{attrs:{slot:"addonAfter",type:"link",size:"small"},on:{click:function(e){return t.sendMail(!0)}},slot:"addonAfter"},[t._v(" "+t._s(t.$t("register.text_8"))+" ")]):a("a-button",{attrs:{slot:"addonAfter",type:"link",size:"small"},slot:"addonAfter"},[t._v(" "+t._s(t.count)+" s ")])],1)],1):t._e(),a("a-form-model-item",{staticClass:"mb-10",attrs:{label:t.$t("password"),prop:"password"}},[a("a-input-password",{attrs:{type:"password",placeholder:t.$t("password")},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),a("a-form-model-item",{staticClass:"mb-10",attrs:{label:t.$t("password"),prop:"auth_password"}},[a("a-input-password",{attrs:{type:"password",placeholder:t.$t("password")},model:{value:t.form.auth_password,callback:function(e){t.$set(t.form,"auth_password",e)},expression:"form.auth_password"}})],1),a("a-form-model-item",{staticClass:"mb-10",attrs:{label:t.$t("invite_code")}},[a("a-input",{attrs:{placeholder:t.$t("register.text_9")},model:{value:t.form.invite_code,callback:function(e){t.$set(t.form,"invite_code",e)},expression:"form.invite_code"}})],1),a("a-form-model-item",{staticClass:"mb-10"},[a("a-checkbox",{directives:[{name:"decorator",rawName:"v-decorator",value:["remember",{valuePropName:"checked",initialValue:!0}],expression:"[\n\t\t\t\t\t\t\t'remember',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvaluePropName: 'checked',\n\t\t\t\t\t\t\t\tinitialValue: true,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t]"}]},[a("span",{staticStyle:{"font-weight":"100"},domProps:{innerHTML:t._s(t.$t("register.text_3",{url:t.config.tos_url}))}})])],1),1===t.config.is_recaptcha?a("div",[a("reCaptcha",{attrs:{sitekey:t.config.recaptcha_site_key},on:{getValidateCode:t.getValidateCode}})],1):t._e(),a("a-form-model-item",[a("a-button",{staticClass:"login-form-button",attrs:{type:"primary",block:"","html-type":"submit"},on:{click:t.handleSubmit}},[t._v(" "+t._s(t.$t("register.text_6"))+" ")])],1)],1),a("p",{staticClass:"font-semibold text-muted text-center"},[t._v(" "+t._s(t.$t("register.text_4"))+" "),a("router-link",{staticClass:"font-bold",attrs:{to:"/login"}},[t._v(" "+t._s(t.$t("register.text_5"))+" ")])],1)],1)],1),a("a-modal",{attrs:{title:"验证",visible:t.visible},on:{ok:function(e){t.visible=!1},cancel:function(e){t.visible=!1}}},[a("reCaptcha",{attrs:{sitekey:t.config.recaptcha_site_key},on:{getValidateCode:t.getValidateCode2}})],1)],1)},[],!1,null,null,null);e.default=o.exports}}]);